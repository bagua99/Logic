#include "GameLogic.h"
#include <iostream>

int main()
{
	CGameLogic gameLogic;

	///////////////////可胡///////////////////
	/*BYTE cbCardData[MAX_COUNT] =
	{
	0x01,0x01,0x01,0x01,
	0x02,0x02,0x02,0x02,
	0x03,0x03,0x03,0x03,
	0x04,0x04,0x04,0x04,
	0x05,0x05,0x05,
	0x06,0x06
	};*/

	/*char cbCardData[MAX_COUNT] =
	{
	0x11,0x11,0x11,
	0x12,0x12,0x12,
	0x13,0x13,0x13,
	0x07,0x07,0x07,
	0x08,0x08,0x08,
	0x1A,0x1A,0x1A,
	0x09,0x09,0x09
	};*/

	// 12胡可胡，9胡不可胡
	//BYTE cbCardData[] =
	//{
	//	0x12,0x13,0x14,
	//	0x02,0x07,0x0A
	//};

	// 0胡自己摸可胡，3胡别人摸可胡
	/*BYTE cbCardData[] =
	{
	0x12,0x12,0x12,
	0x03,0x03,
	0x02,0x07,0x0A,
	0x15,0x16,0x17,
	0x1A,0x1A,0x1A
	};*/

	// 9胡别人摸可胡，自己摸不可胡
	/*BYTE cbCardData[] =
	{
	0x13,0x13,0x17,0x07,0x17,0x12,0x1A,0x07,0x08,0x06,0x07
	};*/
	///////////////////可胡///////////////////


	///////////////////不可胡///////////////////
	/*BYTE cbCardData[MAX_COUNT] =
	{
	0x01,0x01,0x01,0x07,
	0x02,0x02,0x02,0x02,
	0x03,0x03,0x03,0x0A,
	0x04,0x04,0x04,0x04,
	0x05,0x05,0x05,
	0x06,0x06
	};*/

	/*BYTE cbCardData[MAX_COUNT] =
	{
	0x11,0x11,0x11,
	0x12,0x12,0x02,
	0x13,0x13,0x0A,
	0x14,0x14,0x04,
	0x05,0x05,0x05,
	0x07,0x07,0x06,
	0x07,0x07,0x0A
	};*/

	/*BYTE cbCardData[MAX_COUNT] =
	{
	0x11,0x11,0x11,
	0x12,0x12,0x12,
	0x13,0x13,0x13,
	0x14,0x14,0x14,
	0x05,0x05,0x05,
	0x07,0x07,0x07,
	0x17,0x19,0x1A
	};*/
	///////////////////不可胡///////////////////

	char cbCardData[MAX_COUNT] =
	{
		0x11,0x11,0x11,
		0x12,0x12,0x12,
		0x13,0x13,0x13,
		0x07,0x07,0x07,
		0x08,0x08,0x08,
		0x1A,0x1A,0x1A,
		0x19,0x19,0x19
	};

	ULONGLONG dwTick = GetTickCount64();
	BYTE cbCardIndex[MAX_INDEX] = { 0 };	// 用户扑克
	for (int i = 0; i<sizeof(cbCardData) - 1; ++i)
	{
		cbCardIndex[gameLogic.SwitchToCardIndex(cbCardData[i])]++;
	}

	int nTick = GetTickCount();
	tagHuCardInfo HuCardInfo;
	HuCardInfo.bSelfAddCard = false;
	if (gameLogic.GetHuCardInfo(cbCardIndex, cbCardData[sizeof(cbCardData) - 1], 0, HuCardInfo))
	{
		cout << "Find Hu ms = " << GetTickCount() - nTick << endl;

		for (int i = 0; i<HuCardInfo.cbWeaveCount; ++i)
		{
			tagWeaveItem &WeaveItem = HuCardInfo.WeaveItemArray[i];
			int nWeaveHuXi = gameLogic.GetWeaveHuXi(WeaveItem);
			printf("cbWeaveKind=%d,cbCardCount=%d,nWeaveHuXi=%d\ncbCardList[0]=0x%02x,cbCardList[1]=0x%02x,cbCardList[2]=0x%02x,cbCardList[3]=0x%02x\n", WeaveItem.cbWeaveKind, WeaveItem.cbCardCount, nWeaveHuXi, WeaveItem.cbCardList[0], WeaveItem.cbCardList[1], WeaveItem.cbCardList[2], WeaveItem.cbCardList[3]);
		}
	}
	else
	{
		cout << "not Hu ms = " << GetTickCount() - nTick << endl;
	}

	return 0;
}